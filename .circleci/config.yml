version: 2.1

jobs:
  test_blog:
    docker:
      - image: cimg/python:3.11.2
        environment:
          PGHOST: 127.0.0.1
          PGUSER: $DB_USER

      - image: cimg/postgres:15.4
        environment:
          POSTGRES_USER: $DB_USER
          POSTGRES_PASSWORD: $DB_PASS
          POSTGRES_DB: $DB_NAME
    steps:
      - checkout
      - run:
          name: "Check Python Version"
          command: python --version
      - run:
          name: "Check env"
          command: env


workflows:
  commit:
    jobs:
      - test_blog